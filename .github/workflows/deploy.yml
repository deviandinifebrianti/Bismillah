name: Django SIPRETI - Push Notification

on:
  push:
    branches: [main, master]

jobs:
  notify:
    runs-on: ubuntu-22.04
    steps:
      - uses: actions/checkout@v4
      
      - name: ğŸ¯ NEW CODE PUSHED! 
        run: |
          echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
          echo "ğŸš€ PEMKOTMALANG-SIPRETI: NEW DEPLOYMENT READY!"
          echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
          echo ""
          echo "ğŸ“‚ Repository: deviandinifebrianti/Bismillah"
          echo "ğŸŒ Server: 34.142.128.41" 
          echo "ğŸ“ Path: /home/g2141720189/sipreti/lancar/pemkot"
          echo "â° Time: $(date)"
          echo ""
          echo "ğŸ”§ MANUAL DEPLOY COMMAND:"
          echo "   ssh g2141720189@34.142.128.41"
          echo "   cd /home/g2141720189/sipreti/lancar/pemkot"
          echo "   ./deploy.sh"
          echo ""
          echo "ğŸ“‹ OR Step by step:"
          echo "   1. git pull origin main"
          echo "   2. source .venv/bin/activate"  
          echo "   3. pip install -r requirements.txt"
          echo "   4. python manage.py migrate"
          echo "   5. python manage.py collectstatic --noinput"
          echo ""
          echo "âœ… Ready for deployment!"
          
      - name: ğŸ“ Recent Changes
        run: |
          echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
          echo "ğŸ“‹ LATEST COMMITS:"
          echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
          git log --oneline -5 --decorate --color=always